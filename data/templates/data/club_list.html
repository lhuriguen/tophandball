{% extends "base.html" %}
{% load th_extra %}

{% block title %}Club index{% endblock %}
{% block active_club %}active{% endblock %}

{% block over_content %}
<div class="jumbotron th-masthead">
  <div class="container">
    <h1>Clubs</h1>
    <p>We currently have {{ club_count }} clubs in our database. You can search by club name or browse by country.</p>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-sm-5 col-md-3">
        <form action="" method="get" id="search-form">
            <div class="input-group input-group-lg">
                <input type="text" class="form-control" id="id_query" name="name" placeholder="Search here!">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-primary"><i class="fa fa-search"></i></button>
                </span>
            </div>
        </form>
        <p></p>
        <div id="search-results">
            {% include "data/_club_search.html" %}
        </div>
        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title"><i class="fa fa-heart"></i> Popular Clubs</h3>
            </div>
            <div class="list-group media-list">
                {% for club in popular_list %}
                {% include "data/_club_list_item.html" with show_fans=True %}
                {% empty %}
                <a href="#" class="list-group-item">No popular clubs found.</a>
                {% endfor %}
            </div>
        </div>
    </div>
    <div class="col-sm-7 col-md-8">
        <div class="well">
            <p class="lead">Country</p>
            <ul class="list-inline">
                <li><a href="."><b>Show all</b></a></li>
                {% for country in countries %}
                {% if request.GET.country == country %}
                <li>{{ country|country_name }}</li>
                {% else %}
                <li><a href="?country={{ country }}">{{ country|country_name }}</a></li>
                {% endif %}
                {% endfor %}
            </ul>
        </div>
        {% if request.GET.country %}
        <h4><i>Showing <b>{{ club_list|length }}</b> club{{ club_list|pluralize }} from {{ request.GET.country|country_name }}</i></h4>
        {% else %}
        <h4><i>Showing <b>all</b> clubs</i></h4>
        {% endif %}
        <hr>
        <div id="country_clubs">
            {% include "data/_pagination.html" %}
            <div class="row">
            {% for item in club_list %}
                <div class="col-xs-6 col-md-3">
                    <a href="{{ item.get_absolute_url }}" class="th-card text-center">
                        <img class="th-card-poster th-card-poster-center" src="{{ item.logo_url }}" alt="{{ item.name }}">
                        <div class="th-card-div">
                            <h5 class="th-card-heading"><b>{{ item.name }}</b></h5>
                            <small class="text-info th-card-body">{{ item.country.name }}</small>
                            <div class="th-card-btn">
                                <form class="list_follow" action="{% url 'data:club_love' item.id %}" method="post">
                                    {% include "data/_list_love.html" %}
                                </form>
                            </div>
                        </div>
                    </a>
                </div>
                {% if forloop.counter|divisibleby:4 %}
                </div>
                <div class="row">
                {% elif forloop.counter|divisibleby:2 %}
                <div class="clearfix visible-sm visible-xs"></div>
                {% endif %}
            {% endfor %}
            </div>
            {% include "data/_pagination.html" %}
        </div>
    </div>
</div>
{% endblock %}