{% extends "data/base_club.html" %}

{% block active_team %}active{% endblock %}

{% block specific %}
<div class="well well-sm">
    <ul class="list-inline">
        <li><b>Seasons:</b></li>
    {% for season in seasons reversed %}
        <li><a href="?season={{ season.year_from }}">{{ season.name }}</a></li>
    {% endfor %}
    </ul>
</div>
<div class="row">
    <div class="col-md-9">
    
        <h4><i>Showing team for the <b>
        {% if request.GET.season %} {{ request.GET.season }}/{{ request.GET.season|add:"1" }}
        {% else %} current{% endif %}</b> season.</i></h4>
        <hr>
        <div class="row">
        {% for player in staff_list %}
            <div class="col-xs-6 col-sm-3">
                <a href="{{ player.player.get_absolute_url }}" class="th-card">
                    <div class="text-center">
                        <img class="th-card-poster" src="{{ player.player.photo_url }}" alt="photo">
                    </div>
                    <div class="th-card-div">
                        <h5 class="th-card-heading"><b>{{ player.player.last_name }}</b>, {{ player.player.first_name }}</h5>
                        <p class="text-muted th-card-body small">
                        {{ player.player.birth_date|date:"d/m/Y" }} (age {{ player.player.age }}), {{ player.player.country }}
                        </p>
                        <p class="text-info th-card-body small">
                        #{{ player.shirt_number }}. {{ player.player.get_position_display }}
                        </p>
                        <div class="th-card-btn">
                            <form class="list_follow" action="{% url 'data:player_love' player.player.id %}" method="post">
                                {% with item=player.player %}
                                {% include "data/list_love.html" %}
                                {% endwith %}
                            </form>
                        </div>
                    </div>
                </a>
            </div>
            {% if forloop.counter|divisibleby:4 %}
        </div>
        <div class="row">
            {% elif forloop.counter|divisibleby:2 %}
        <div class="clearfix visible-xs"></div>
            {% endif %}
        {% empty %}
            <div class="col-md-12">
                <div class="alert alert-warning" role="alert">
                    <i class="fa fa-warning"></i> No players found for the selected season.
                </div>
            </div>
        {% endfor %}
        </div>

        <div class="row">
        {% for coach in coach_list %}              
            <div class="col-xs-6 col-sm-3">
                <a href="{{ coach.coach.get_absolute_url }}" class="th-card">
                    <div class="text-center">
                        <img class="th-card-poster" src="{{ coach.coach.photo_url }}" alt="photo">
                    </div>
                    <div class="th-card-div">
                        <h5 class="th-card-heading"><b>{{ coach.coach.last_name }}</b>, {{ coach.coach.first_name }}</h5>
                        <p class="text-muted th-card-body small">
                        {{ coach.coach.birth_date|date:"d/m/Y" }} (age {{ coach.coach.age }}), {{ coach.coach.country }}
                        </p>
                        <p class="text-info th-card-body small">{{ coach.get_role_display }}</p>
                    </div>
                </a>
            </div>
            {% if forloop.counter|divisibleby:4 %}
        </div>
        <div class="row">
            {% elif forloop.counter|divisibleby:2 %}
        <div class="clearfix visible-xs"></div>
            {% endif %}
        {% empty %}
            <div class="col-md-12">
                <div class="alert alert-warning" role="alert">
                    <i class="fa fa-warning"></i> No coaches found for the selected season.
                </div>
            </div>
        {% endfor %}
        </div>

    </div>
    <div class="col-md-3">
        <div class="panel panel-default">
        <div class="panel-body">
            <span class="text-danger small"><i class="fa fa-warning"></i> Season statistics are gathered <b>exclusively</b> from data recorded on TopHandball.</span>
          </div>
        <table class="table table-condensed">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th><abbr title="Goals"><i class="fa fa-bullseye"></i></abbr></th>
                    <th><abbr title="Yellow cards"><i class="fa fa-square yellow-card"></i></abbr></th>
                    <th><abbr title="Two minutes"><i class="fa fa-clock-o" ></i></abbr></th>
                    <th><abbr title="Red cards"><i class="fa fa-square red-card"></i></abbr></th>
                </tr>
            </thead>
            <tbody>
                {% for p in scorers_list %}
                <tr>
                    <td><a href="{{ p.get_absolute_url }}">{{ p.first_name|first }}. {{ p.last_name }}</a></td>
                    <td>{{ p.sum_goals }}</td>
                    <td>{{ p.yellows }}</td>
                    <td>{{ p.two_mins }}</td>
                    <td>{{ p.reds }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="warning text-warning">No data found for the selected season.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        </div>
    </div>
</div>
{% endblock %}